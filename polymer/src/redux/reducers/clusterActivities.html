<link rel="import" href="../../polyfills/es6-shim.html">
<link rel="import" href="../redux.html">
<link rel="import" href="../../constants.html">

<script>
  (function () {
    'use strict';

    App.Reducers = App.Reducers || {};

    App.Reducers.ClusterActivities = Redux.combineReducers({
      all: clusterActivitiesListReducer,
      count: clusterActivitiesCountReducer,
      loading: loadingClusterActivitiesReducer,
      partners: partnersByClusterActivityIdReducer,
      partnersCount: partnersByClusterActivityIdCountReducer,
      partnersLoading: partnersByClusterActivityIdLoadingReducer,
      indicators: indicatorsByClusterActivityIdReducer,
      indicatorsCount: indicatorsByClusterActivityIdCountReducer,
      indicatorsLoading: indicatorsByClusterActivityIdLoadingReducer
    });

    function clusterActivitiesListReducer(state, action) {
      if (typeof state === 'undefined') {
        state = [];
      }

      switch (action.type) {
        case App.Constants.SET_CLUSTER_ACTIVITIES_LIST:
          return action.data.results;

        case App.Constants.RESET:
          return [];

        default:
          return state;
      }
    }

    function clusterActivitiesCountReducer(state, action) {
      if (typeof state === 'undefined') {
        state = 0;
      }

      switch (action.type) {
        case App.Constants.SET_CLUSTER_ACTIVITIES_COUNT:
          return action.count;

        default:
          return state;
      }
    }

    function loadingClusterActivitiesReducer(state, action) {
      if (typeof state === 'undefined') {
        state = false;
      }

      switch (action.type) {
        case App.Constants.CLUSTER_ACTIVITIES_LOADING_START:
          return true;

        case App.Constants.CLUSTER_ACTIVITIES_LOADING_STOP:
          return false;

        default:
          return state;
      }
    }

    function partnersByClusterActivityIdReducer(state, action) {
      if (typeof state === 'undefined') {
        state = {};
      }

      switch (action.type) {
        case App.Constants.SET_PARTNERS_BY_CLUSTER_ACTIVITY_ID:
          return (function () {
            var change = {};

            change[action.clusterActivityId] = action.data;
            return Object.assign({}, state, change);
          }());

        case App.Constants.RESET:
          return {};

        default:
          return state;
      }
    }

    function partnersByClusterActivityIdCountReducer(state, action) {
      if (typeof state === 'undefined') {
        state = 0;
      }

      switch (action.type) {
        case App.Constants.SET_PARTNERS_BY_CLUSTER_ACTIVITY_ID_COUNT:
          return (function () {
            var change = {};

            change[action.clusterActivityId] = action.count;
            return Object.assign({}, state, change);
          }());

        default:
          return state;
      }
    }

    function partnersByClusterActivityIdLoadingReducer(state, action) {
      if (typeof state === 'undefined') {
        state = false;
      }

      switch (action.type) {
        case App.Constants.PARTNERS_BY_CLUSTER_ACTIVITY_ID_LOADING_START:
          return true;

        case App.Constants.PARTNERS_BY_CLUSTER_ACTIVITY_ID_LOADING_STOP:
          return false;

        default:
          return state;
      }
    }

    function indicatorsByClusterActivityIdReducer(state, action) {
      if (typeof state === 'undefined') {
        state = {};
      }

      switch (action.type) {
        case App.Constants.SET_INDICATORS_BY_CLUSTER_ACTIVITY_ID:
          return (function () {
            var change = {};

            change[action.clusterActivityId] = action.data;
            return Object.assign({}, state, change);
          }());

        case App.Constants.RESET:
          return {};

        default:
          return state;
      }
    }

    function indicatorsByClusterActivityIdCountReducer(state, action) {
      if (typeof state === 'undefined') {
        state = 0;
      }

      switch (action.type) {
        case App.Constants.SET_INDICATORS_BY_CLUSTER_ACTIVITY_ID_COUNT:
          return (function () {
            var change = {};

            change[action.clusterActivityId] = action.count;
            return Object.assign({}, state, change);
          }());

        default:
          return state;
      }
    }

    function indicatorsByClusterActivityIdLoadingReducer(state, action) {
      if (typeof state === 'undefined') {
        state = false;
      }

      switch (action.type) {
        case App.Constants.INDICATORS_BY_CLUSTER_ACTIVITY_ID_LOADING_START:
          return true;

        case App.Constants.INDICATORS_BY_CLUSTER_ACTIVITY_ID_LOADING_STOP:
          return false;

        default:
          return state;
      }
    }
  }());
</script>
