<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/etools-content-panel/etools-content-panel.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../ip-reporting/ip-reporting-indicator-details.html">
<link rel="import" href="../etools-prp-data-table-row.html">
<link rel="import" href="../../styles/table-styles.html">

<link rel="import" href="../../behaviors/utils.html">
<link rel="import" href="../report-status.html">
<link rel="import" href="../labelled-item.html">

<dom-module id="pd-output">
  <template>
    <style include="iron-flex iron-flex-factors data-table-styles table-styles">
      /*:host {
        display: block;
        margin-bottom: 25px;

        --ecp-content: {
          padding: 0;
        };

        --paper-icon-button: {
          color: var(--theme-secondary-text-color);
        };
      }

      .header {
        padding: 25px;
      }

      .header labelled-item {
        font-size: 16px;
      }

      .header status-badge {
        position: relative;
        top: -2px;
      }

      .header labelled-item:not(:last-child) {
        margin-bottom: 25px;
      }

      .indicator:not(:last-child) {
        margin-bottom: 25px;
      }

      .indicator-header {
        padding: 10px 10px 10px 25px;
        background: var(--theme-secondary-color-a);
      }

      .indicator-header__title h3 {
        margin: 0;
        font-size: 14px;
      }

      .status-badge {
        margin-right: 10px;
      }

      .indicator-header__target {
        width: 250px;
        padding-left: 10px;
      }

      .indicator-header__target dl {
        margin: 0;
        text-align: right;
        font-size: 12px;
      }

      .indicator-header__target dt {
        color: var(--theme-secondary-text-color);
      }

      .indicator-header__target dd {
        margin: 0;
        font-weight: bold;
      }

      .indicator-header__toggle {
        padding-left: 20px;
      }*/
    </style>

    <etools-content-panel panel-title="[[data.name]]">
      <div class="header">
        <labelled-item label="Overall status">
          <report-status status="[[data.status.report_status]]"></report-status>
        </labelled-item>

        <labelled-item label="Narrative assessment">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Unde quis quaerat quae ipsum.
        </labelled-item>
      </div>

      <template
          id="indicators"
          is="dom-repeat"
          items="[[data.indicator_reports]]"
          as="indicator">

          <etools-prp-data-table-row details-opened="{{detailsOpened}}">
            <div slot="row-data">
              <div class="indicator-header layout horizontal">

                <!-- <div class="indicator-header__title flex-3 layout vertical center-justified">
                  <div class="layout horizontal"> -->
                    <div class="status-badge layout vertical center-justified">
                      <status-badge type="success"></status-badge>
                    </div>
                    <h3>[[indicator.indicator_name]]</h3>
                  <!-- </div>
                </div> -->

                <!-- <div class="indicator-header__target flex-none layout vertical center-justified"> -->
                  <!-- <dl class="layout horizontal justified">
                    <dt class="flex-3">Target:</dt>
                    <dd class="flex">[[_withDefault(indicator.target)]]</dd>
                  </dl>

                  <dl class="layout horizontal justified">
                    <dt class="flex-3">Achievement in reporting period:</dt>
                    <dd class="flex">[[_withDefault(indicator.achieved)]]</dd>
                  </dl> -->
                <!-- </div> -->

            </div>
            <div slot="row-data-details">
              <ip-reporting-indicator-details indicator-id="[[data.id]]"
                                              limit=1
                                              is-open="[[detailsOpened]]">
              </ip-reporting-indicator-details>
            </div>
          </etools-prp-data-table-row>

      </template>
    </etools-content-panel>
  </template>

  <script>
    Polymer({
      id: 'pd-output',

      behaviors: [
        App.Behaviors.UtilsBehavior,
      ],

      properties: {
        indicator: Object,

        data: Object,

        detailsOpened: {
          type: Boolean,
          value: false
        },
      },
    });
  </script>
</dom-module>
